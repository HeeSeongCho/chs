- name: create mysql template
  command: gcloud compute instance-templates create mysql-template --boot-disk-size=10GB --image=project-db-snap --tags=http-server --scopes=default,compute-rw
  ignore_errors: true

- name: create mysql master instance
  command: gcloud compute instances create mysql-master --source-instance-template=mysql-template  --zone=asia-east1-a --subnet=mysql-asia-subnet  
  ignore_errors: true

- name: create mysql slave instance
  command: gcloud compute instances create mysql-slave --zone=asia-east1-a --subnet=mysql-asia-subnet --source-instance-template=mysql-template
  ignore_errors: true

- name: create unmanaged mysql-instance-groups
  command: gcloud compute instance-groups unmanaged create mysql-group --zone=asia-east1-a

- name: added instances to mysql-instance-groups
  command: gcloud compute instance-groups unmanaged add-instances mysql-group --zone=asia-east1-a --instances=mysql-master,mysql-slave
